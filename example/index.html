<script src="https://cdn.socket.io/socket.io-1.3.2.js"></script>
<script type="text/javascript">
	var socket = io.connect('http://localhost:9999');
	var state = false;

	socket.on('changed', function(args, ret) {
		document.body.style.backgroundColor = (args[0] ? '' : 'red');
		ret();
	})

	function changeState(sender) {
		socket.emit('rpc:call', 'toggleLed', [], function(state) {
			sender.value = (state ? 'TURN OFF' : 'TURN ON');
		});
	}

	function changeLed(state) {
		socket.emit('rpc:notify', 'changeLed', state);
	}

</script>

<input type="button" value="change state" onclick="changeState(this)" />
<input type="button" value="TURN ON" onclick="changeLed(true)" />
<input type="button" value="TURN OFF" onclick="changeLed(false)" />
